
{% macro SendorJob(job) %}
<table class="table table-striped">
	<thead>
		{% set job_enqueue_time = job['enqueue_time'] %}
		{% set job_duration = job['duration'] %}
			<tr>
				<th colspan="2">
					Job enqueued on: {{ job_enqueue_time }}
					{% if job_duration %}
						<br>	Duration: {{ job_duration }}
					{% endif %}
				</th>
			</tr>
	</thead>

	<tbody>
		{% set tasks = job['tasks'] %}
		{% for task in tasks %}
			{% set description = task['description'] %}
			{% set state = task['state'] %}
			{% set activity = task['activity'] %}
			{% set progress = 100 * task['progress'] ~ "%" %}
			{% set log = task['log'] %}
			{% set task_duration = task['duration'] %}
			<tr>
				<td>
					{% if task_duration %}
						{{description}}: {{ task_duration }}: {{ activity }} - {{ progress }}
					{% else %}
						{{description}}
					{% endif %}
					<div>
						{% if log != "" %}
						<pre>{{log}}</pre>
						{% endif %}
					</div>
				</td>
				<td>
					{% if state == 'not_started' %}
					<button type="button" disabled="disabled" class="btn btn-default">Not started</button>
					{% elif state == 'in_progress' %}
					<button type="button" disabled="disabled" class="btn btn-warning">In progress</button>
					{% elif state == 'completed' %}
					<button type="button" disabled="disabled" class="btn btn-success">Done</button>
					{% elif state == 'failed' %}
					<button type="button" disabled="disabled" class="btn btn-danger">Failed</button>	
					{% elif state == 'canceled' %}
					<button type="button" disabled="disabled" class="btn btn-inverse">Canceled</button>	
					{% else %}
					Error: Unknown state!
					{% endif %}
				</td>
			</tr>
		{% endfor %}
	</tbody>
</table>
{% endmacro %}
